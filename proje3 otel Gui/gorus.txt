public partial class Form15 : Form
    {   
        class gorus
        {
            public int puan;
            public List<string> yorum;
            public string kullanýcý;
            public string icerik;
            public List<string> possitivex;
            public List<string> negativex;

            public gorus()
            {
                yorum = new List<string>();
                kullanýcý = "";
                possitivex = new List<string>();
                negativex = new List<string>();
                puan = 0;
            }

        }
        List<string> possitive;
        List<string> negative;
        List<gorus> görüþ;
        public Form15()
        {
            possitive = new List<string>();
            negative = new List<string>();
            görüþ = new List<gorus>();
            InitializeComponent();
        }
        
        private void Form13_Load(object sender, EventArgs e)
        {
            string dosya_yolu = @"C:\Users\zzuur\Desktop\data\görüþ.dat";
            string dosya_yolu2= @"C:\Users\zzuur\Desktop\data\possitive.dat";
            string dosya_yolu3 = @"C:\Users\zzuur\Desktop\data\negative.dat";

            FileStream fsp = new FileStream(dosya_yolu2, FileMode.Open, FileAccess.Read);

            StreamReader swp = new StreamReader(fsp);

            string yazip = swp.ReadLine();
            while (yazip != null)
            {
                possitive.Add(yazip);
                yazip = swp.ReadLine();

            }

            swp.Close();
            fsp.Close();


            FileStream fsn = new FileStream(dosya_yolu3, FileMode.Open, FileAccess.Read);

            StreamReader swn = new StreamReader(fsn);

            string yazin = swn.ReadLine();
            while (yazin != null)
            {
                negative.Add(yazin);
                yazin = swn.ReadLine();

            }

            swn.Close();
            fsn.Close();

            




            //görüþ okuma
            FileStream fs = new FileStream(dosya_yolu, FileMode.Open, FileAccess.Read);
            
            StreamReader sw = new StreamReader(fs);
            
            string yazi = sw.ReadLine();
            while (yazi != null)
            {
                
                string[] parcalar = yazi.Split(',');
                gorus yenigorus = new gorus();
                yenigorus.kullanýcý = parcalar[0];
                yenigorus.puan = Convert.ToInt32(parcalar[1]);
                yenigorus.icerik = parcalar[2];
                string[] parcalar2 = parcalar[2].Split(' ');
                foreach(string a in parcalar2)
                {
                    yenigorus.yorum.Add(a.ToLower());
                }
                görüþ.Add(yenigorus);
                yazi = sw.ReadLine();

            }
           
            sw.Close();
            fs.Close();
           
            foreach(gorus görüs in görüþ)
            {
               
                int pozitif_kelime_say = 0;
                int negatif_kelime_say = 0;
                foreach (string yorum in görüs.yorum)
                {
                    foreach(string pozitif_kelime in possitive)
                    {
                        if (yorum.Contains(pozitif_kelime.ToLower()))
                        {
                            if (!(görüs.possitivex.Contains(yorum)))
                            {
                                pozitif_kelime_say++;
                                görüs.possitivex.Add(yorum);
                            }
                            
                        }
                    }
                    foreach (string negatif_kelime in negative)
                    {
                        if (yorum.Contains(negatif_kelime.ToLower()))
                        {
                            if (!(görüs.negativex.Contains(yorum)))
                            {
                                negatif_kelime_say++;
                                görüs.negativex.Add(yorum);
                            }
                           
                            
                        }
                    }
                }
                double yuzde =(double)((double)(pozitif_kelime_say * 100)) / görüs.yorum.Count;
                double yuzde2 =(double)( (double)(negatif_kelime_say * 100)) / görüs.yorum.Count;
                ListViewItem otellik = listView1.Items.Add(görüs.kullanýcý);
                if (yuzde2 > yuzde)
                {
                    otellik.SubItems.Add("Olumsuz");
                }
             
                else
                {
                    otellik.SubItems.Add("Olumlu");
                }

                
                otellik.SubItems.Add(görüs.icerik);

                listView1.Height += 15;
                

                listView1.Update();
            }
            List<gorus> görüþþ=görüþ;
            string aaaa = "þklk";

        }
    }